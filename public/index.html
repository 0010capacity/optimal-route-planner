<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#2563eb" />
    <meta
      name="description"
      content="여러 장소를 효율적으로 방문할 수 있는 최적 경로를 자동으로 계산해주는 웹 애플리케이션"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>최적 경로 플래너</title>

    <!-- Naver Maps API Script -->
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=3hku2yfd31"></script>

    <!-- Kakao Maps JavaScript SDK v2 (Places 서비스 포함) - 개선된 로딩 방식 -->
    <script>
      (function() {
        // Kakao SDK 로드 상태 추적
        window.kakaoSdkReady = false;

        // 콜백 함수 정의
        window.initKakaoSdk = function() {
          if (window.kakao && window.kakao.maps) {
            try {
              // v2에서는 appkey를 URL로 전달하므로 별도 init() 불필요

              // Maps SDK 로드
              window.kakao.maps.load(() => {
                window.kakaoSdkReady = true;
              });

            } catch (error) {
              // Kakao SDK 초기화 실패 시 무시
            }
          }
        };

        // 스크립트 동적 로드 (async 방식)
        const script = document.createElement('script');
        script.src = 'https://dapi.kakao.com/v2/maps/sdk.js?appkey=5be0a34292474922b240a1bd76ad518c&libraries=services&autoload=false';
        script.async = true;
        script.defer = true;

        // 로드 완료 이벤트 리스너
        script.onload = function() {
          // 약간의 지연 후 초기화 (안전하게)
          setTimeout(window.initKakaoSdk, 100);
        };

        script.onerror = function() {
          // 스크립트 로드 실패 시 무시
        };

        document.head.appendChild(script);
      })();
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
