<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Optimal Route Planner</title>

    <!-- Naver Maps API Script -->
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=3hku2yfd31"></script>

    <!-- Kakao Maps JavaScript SDK v2 (Places 서비스 포함) - 개선된 로딩 방식 -->
    <script>
      (function() {
        // Kakao SDK 로드 상태 추적
        window.kakaoSdkReady = false;

        // 콜백 함수 정의
        window.initKakaoSdk = function() {
          console.log('� Kakao SDK v2 초기화 시도 시작');

          if (window.kakao && window.kakao.maps) {
            console.log('✅ Kakao SDK v2 발견됨');

            try {
              // v2에서는 appkey를 URL로 전달하므로 별도 init() 불필요
              console.log('🎯 Kakao SDK v2 초기화 (URL 파라미터 방식 사용)');

              // Maps SDK 로드
              window.kakao.maps.load(() => {
                console.log('🚀 Kakao Maps SDK v2 로드 완료');
                window.kakaoSdkReady = true;
                console.log('🎉 Kakao SDK v2 완전 초기화 완료 - 모든 기능 사용 가능');
              });

            } catch (error) {
              console.error('❌ Kakao SDK v2 초기화 실패:', error);
            }
          }
        };

        // 스크립트 동적 로드 (async 방식)
        const script = document.createElement('script');
        script.src = 'https://dapi.kakao.com/v2/maps/sdk.js?appkey=5be0a34292474922b240a1bd76ad518c&libraries=services&autoload=false';
        script.async = true;
        script.defer = true;

        // 로드 완료 이벤트 리스너
        script.onload = function() {
          console.log('Kakao SDK script loaded, initializing...');
          // 약간의 지연 후 초기화 (안전하게)
          setTimeout(window.initKakaoSdk, 100);
        };

        script.onerror = function() {
          console.error('Failed to load Kakao SDK script');
        };

        document.head.appendChild(script);
      })();
    </script>

    <!-- Google Maps API Script with Places Library -->
    <script>
      (function() {
        // Google Maps API 로드 상태 추적
        window.googleMapsLoaded = false;

        // 콜백 함수 정의
        window.initGoogleMaps = function() {
          window.googleMapsLoaded = true;
          console.log('Google Maps API loaded successfully');
        };

        // 스크립트 동적 로드
        const script = document.createElement('script');
        script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCuI4OfM-oPbnKoes_uaYfUWZ2f-btjgtQ&v=weekly&libraries=places&callback=initGoogleMaps&loading=async';
        script.async = true;
        script.defer = true;

        // 로드 완료 이벤트 리스너
        script.onload = function() {
          console.log('Google Maps script loaded');
        };

        script.onerror = function() {
          console.error('Failed to load Google Maps script');
        };

        document.head.appendChild(script);
      })();
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
